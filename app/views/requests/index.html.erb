
<main class="detalle" >
  <div class="breadcrumb-class">
    Está en:<a href="#" target="_self" title="Inicio">Inicio</a>
  </div>
  <div class="container-fluid" style="padding: 2%" >
    <div class="col-md-3" style="padding: 1%; background-color: #aaa">
      <%= render 'static_pages/personal-info' %>
    </div>
    <div class="col-md-9" style="padding-top: 0">
      <div class="container-fluid" style="padding-top: 2%; background-color: #eee">


        <% if @student.stu_rol == 2 %>
        <div class="row">
              <div class="col-md-8">
               <h1>Solicitudes</h1>
              </div> 
              <div class="col-md-4">
                  <%= button_to 'Nueva solicitud', new_student_request_path, method: :get, class: "btn btn-success"%>
              </div>
        </div>  

        <% elsif @student.stu_rol == 1 %>

        <div class="container-fluid">
          <div class="row">
           <h1>Solicitudes</h1>
          </div> 
          <div class="row">
            <%= form_tag admin_requests_path, :method => 'get', class: "form-inline" do%>
              <div class="form-group " >  
                <label class="sr-only">Profesor</label>
                <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "Nombre profesor" %>
              </div>
              <div class="form-group " >
                <label class="sr-only">Estudiante</label>
                <%= text_field_tag :search2, params[:search2], class: "form-control", placeholder: "Nombre estudiante"%>
              </div>
              <div class="form-group ">
                <label class="sr-only">Estado</label>
                <%= select_tag :search3,options_for_select([["",nil],["Pendiente",1],["En revisión",2],["Devuelto",3],["En espera de soportes",4],["Terminada",5]]), class: "form-control", placeholder: "Estado"%>  
              </div>
              <!--<p>Estado</p><%= number_field_tag :search3, params[:search3] %>-->
              
              <div class="form-group">
                <%= submit_tag "Filtrar", class: "btn btn-default"%>
              </div>
            <% end %>
          </div>
        </div>  
        <% end %>

        <table class="table table-hover table-condensed">
          <thead>
            <tr>
              <th>Estado</th>
              <th>Estudiante</th>
              <th>Profesor</th>
              <th>Descripcion</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @requests.each do |request| %>
              <tr class="<%= (request.req_estado == 1) ? 'danger' : ((request.req_estado == 2) ? 'info' : (  request.req_estado == 3 ? 'warning' : 'success') ) %>" >
                <td>
                  <% if request.req_estado == 1 %>
                    <span><strong>Pendiente</strong></span>
                  <% elsif request.req_estado == 2 %>
                    <span><strong>En revisión</strong></span>
                  <% elsif request.req_estado == 3 %>
                    <span><strong>Devuelto</strong></span>
                  <% elsif request.req_estado == 4 %>
                    <span><strong>En espera de soportes</strong></span>
                  <% elsif request.req_estado == 5 %>
                    <span><strong>Terminada</strong></span>
                  <% end %>
                </td>
                <td><%= request.student.stu_name %></td>
                <td><%= request.professor.pro_name %></td>
                <td><%= request.req_descripcion %></td>
                <%case @student.stu_rol
                  when 1%>
                  <td><%= link_to 'Detalles', admin_request_path(request) %></td>
                  <% when 2 %>
                  <td><%= link_to 'Detalles', student_request_path(request) %></td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>

        <% if @student.stu_rol == 1 %>
        <%= will_paginate @requests, renderer: BootstrapPagination::Rails %>
        <% end %>
      </div>
    </div>
  </div>
</main>
  